{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { GiftedChat, MessageText } from 'react-native-gifted-chat';\nimport { renderAvatar, renderBubble, renderSystemMessage, renderMessage, renderMessageText, renderCustomView } from \"./SystemMessage\";\nimport SystemMessage from \"./SystemMessage\";\nimport { Dialogflow_V2 } from 'react-native-dialogflow';\nimport { dialogflowConfig } from \"../env\";\nvar BOT_USER = {\n  _id: 2,\n  name: 'FAQ Bot',\n  avatar: 'https://gm1.ggpht.com/XmdWgDgmAnUERhzVhxFHRVIsJyX4Tcv-_C1BMpXZ74LZ1c1uGH3cBZA3gHBI0Lg0xRK9EwbpB_SrQlqW3ONfCfZc24xqKCCHQ5rfjkVcfQM3VJa-Ml9EpnYu7a6wLJg1bmBkUkKDgm0qo9qfKMAwpYz1QB1lsaiLWjUOHQfHYLI3TLCy7UoFIVQCFpC2r4eqIIt8aMID2RjmgieykD98-UQOzajG5EXgZoW11iNNljZ2U1nZJCbBWKTznrwARWLKsQDpaGq_lCV6P4R3rJQro8m25SathY9arn8FRAf-AeqHc4BjOk6KT3vjhTa22F-n6oCz0HRCpeI8WaRESNphbLT8j6b3vGGcpKrBSiJpwC46CJMEYoNhqu6hqd6nUVxcEVz8Rey_pW5DrnqGJ_eTj1YGkIkcJBRp7M7kI21L7jut30aumK7oHWeaY0lw-nvC6tLfEwqt1FCji6X9tJjyjbRfHGVd_OAySRhokAjSyA22tmLhnms0PRYLk5PDXzickWmFUbGWuaQug1Bs2uHVWYmVbelfytuDz3IGZudeYXqWKuZ4NMIW4PqDgwceTuVIxgNO5Ddo4leK1yA8ZQf0PkjS8ipQrjrTDD7O8tL2gQMOVlsFRuH1La8NFXHE-CSgpHU--9UYzzmpeGKtfrP5jeFmLZeKx2X2vsDqIMvNdjZb47nYsULYJenQyZcZYph88CFBP8cHB3lOqTuwu3aYOfa52M92dTY887c0wMHC=s0-l75-ft-l75-ft'\n};\n\nvar Dialogue = function Dialogue(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  var _useState3 = useState(\"Feeling Depleted\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      trigger = _useState4[0],\n      setTrigger = _useState4[1];\n\n  var _useState5 = useState(\"Dragon\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      madlib = _useState6[0],\n      setMadLib = _useState6[1];\n\n  var _useState7 = useState({\n    \"Feeling Depleted\": \"Why are you feeling depleted? What happened?\",\n    \"My Goals\": \"Why are you concerned about yout goals? What happened?\",\n    \"Feeling Ambiguity\": \"In what way are you feeling that there is ambiguity? What happened?\",\n    \"My Fears\": \"Why do you feel fearful? What happened?\"\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      triggers = _useState8[0],\n      setTriggers = _useState8[1];\n\n  var _useState9 = useState(2),\n      _useState10 = _slicedToArray(_useState9, 2),\n      msgCount = _useState10[0],\n      setMsgCount = _useState10[1];\n\n  var _useState11 = useState([\"ask for feeling\", \"they say what happened\", \"ask why for normal answer\", \"respond normally\", \"asky why with madlib\", \"pick which word for madlib\", \"tell user which madlib picked\", \"respond with madlib\", \"ask if they want to do more or save\"]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      presetMsgs = _useState12[0],\n      setPresetMsgs = _useState12[1];\n\n  var _OkayLetSHaveFun = \"Okay, let’s have fun with this! Choose a word from this list and use it to come up with a new reason for why this situation happened. The crazier the better!\",\n      _OkayLetSHaveFun2 = _slicedToArray(_OkayLetSHaveFun, 2),\n      funWhy = _OkayLetSHaveFun2[0],\n      setFunWhy = _OkayLetSHaveFun2[1];\n\n  useEffect(function () {\n    setMessages([{\n      _id: 1,\n      text: 'Hi, Sam. What is your concern right now?',\n      user: BOT_USER,\n      quickReplies: {\n        type: \"radio\",\n        keepit: true,\n        values: [{\n          \"title\": \"Feeling Depleted\",\n          \"value\": \"Feeling Depleted\"\n        }, {\n          \"title\": \"My Goals\",\n          \"value\": \"My Goals\"\n        }, {\n          \"title\": \"Feeling Ambiguity\",\n          \"value\": \"Feeling Ambiguity\"\n        }, {\n          \"title\": \"My Fears\",\n          \"value\": \"My Fears\"\n        }]\n      }\n    }]);\n    Dialogflow_V2.setConfiguration(dialogflowConfig.client_email, dialogflowConfig.private_key, Dialogflow_V2.LANG_ENGLISH_US, dialogflowConfig.project_id);\n  }, []);\n\n  var _onSend = useCallback(function () {\n    var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var newMessage = messages;\n    delete newMessage[0].createdAt;\n    var newAndNext = [newMessage[0]];\n    setMessages(function (previousMessages) {\n      return GiftedChat.append(previousMessages, newAndNext);\n    });\n    Dialogflow_V2.requestQuery(messages[0].text, function (result) {\n      return handleGoogleResponse(result);\n    }, function (error) {\n      return console.log(error);\n    });\n  }, []);\n\n  var _onQuickReply = function onQuickReply(quickReply) {\n    var id = Date.now();\n    var message = [{\n      \"_id\": Date.now(),\n      \"text\": quickReply[0].value,\n      \"user\": {\n        \"_id\": 1\n      }\n    }];\n    console.log(quickReply[0].value);\n\n    if (quickReply[0].value == \"Save\") {\n      props.changeScreen({\n        screen: \"Title\",\n        story: messages\n      });\n    } else {\n      setMessages(function (previousMessages) {\n        return GiftedChat.append(previousMessages, message);\n      });\n      message = quickReply[0].value;\n      Dialogflow_V2.requestQuery(message, function (result) {\n        return handleGoogleResponse(result);\n      }, function (error) {\n        return console.log(error);\n      });\n    }\n  };\n\n  var handleGoogleResponse = function handleGoogleResponse(result) {\n    var text = result.queryResult.fulfillmentMessages[0].text.text[0];\n    sendBotResponse(text);\n  };\n\n  var sendBotResponse = function sendBotResponse(text) {\n    console.log(text.split(\" \")[0]);\n    var msg = {\n      _id: Date.now(),\n      text: text,\n      createdAt: new Date(),\n      user: BOT_USER\n    };\n\n    if (text.split(\" \")[0] == \"Okay,\") {\n      msg = {\n        _id: Date.now(),\n        text: text,\n        createdAt: new Date(),\n        user: BOT_USER,\n        quickReplies: {\n          type: \"radio\",\n          keepit: true,\n          values: [{\n            \"title\": \"Corn\",\n            \"value\": \"Corn\"\n          }, {\n            \"title\": \"Dragon\",\n            \"value\": \"Dragon\"\n          }, {\n            \"title\": \"Shakira\",\n            \"value\": \"Shakira\"\n          }]\n        }\n      };\n    }\n\n    if (text.split(\" \")[0] == \"Great!\") {\n      msg = {\n        _id: Date.now(),\n        text: text,\n        createdAt: new Date(),\n        user: BOT_USER,\n        quickReplies: {\n          type: \"radio\",\n          keepit: true,\n          values: [{\n            \"title\": \"Save\",\n            \"value\": \"Save\"\n          }, {\n            \"title\": \"Keep Going\",\n            \"value\": \"Keep Going\"\n          }]\n        }\n      };\n    }\n\n    if (text.split(\" \")[0] == \"Nice!\") {\n      msg = {\n        _id: Date.now(),\n        text: text,\n        createdAt: new Date(),\n        user: BOT_USER,\n        quickReplies: {\n          type: \"radio\",\n          keepit: true,\n          values: [{\n            \"title\": \"Black Friday\",\n            \"value\": \"Black Friday\"\n          }, {\n            \"title\": \"Toe Nails\",\n            \"value\": \"Toe Nails\"\n          }, {\n            \"title\": \"Kool-Aid Man\",\n            \"value\": \"Kool-Aid Man\"\n          }]\n        }\n      };\n    }\n\n    if (text == \"Save\") (function () {\n      return props.changeScreen({\n        screen: \"Story\"\n      });\n    });\n    setMessages(function (previousMessages) {\n      return GiftedChat.append(previousMessages, msg);\n    });\n  };\n\n  return React.createElement(View, null, React.createElement(TouchableOpacity, {\n    style: {\n      width: 300,\n      marginTop: 50,\n      backgroundColor: \"white\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexWrap: \"wrap\",\n      alignContent: \"flex-start\",\n      alignItems: \"flex-start\",\n      justifyContent: \"flex-start\"\n    },\n    onPress: function onPress() {\n      return props.changeScreen({\n        screen: \"Home\",\n        story: \"\"\n      });\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 40,\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexWrap: \"wrap\",\n      alignSelf: \"flex-start\",\n      alignContent: \"flex-start\",\n      justifyContent: \"flex-start\"\n    }\n  }, \"\\u21FD\")), React.createElement(GiftedChat, {\n    messages: messages,\n    onSend: function onSend(messages) {\n      return _onSend(messages);\n    },\n    onQuickReply: function onQuickReply(quickReply) {\n      return _onQuickReply(quickReply);\n    },\n    user: {\n      _id: 1\n    },\n    renderAvatar: renderAvatar,\n    renderBubble: renderBubble,\n    renderSystemMessage: renderSystemMessage,\n    renderMessage: renderMessage,\n    renderMessageText: renderMessageText,\n    renderCustomView: renderCustomView\n  }));\n};\n\nexport default Dialogue;\nvar styles = StyleSheet.create({});","map":{"version":3,"sources":["/Users/claracook/Desktop/reactNative/NewProject/Components/Dialogue.js"],"names":["React","useState","useEffect","useCallback","TouchableOpacity","GiftedChat","MessageText","renderAvatar","renderBubble","renderSystemMessage","renderMessage","renderMessageText","renderCustomView","SystemMessage","Dialogflow_V2","dialogflowConfig","BOT_USER","_id","name","avatar","Dialogue","props","messages","setMessages","trigger","setTrigger","madlib","setMadLib","triggers","setTriggers","msgCount","setMsgCount","presetMsgs","setPresetMsgs","funWhy","setFunWhy","text","user","quickReplies","type","keepit","values","setConfiguration","client_email","private_key","LANG_ENGLISH_US","project_id","onSend","newMessage","createdAt","newAndNext","previousMessages","append","requestQuery","result","handleGoogleResponse","error","console","log","onQuickReply","quickReply","id","Date","now","message","value","changeScreen","screen","story","queryResult","fulfillmentMessages","sendBotResponse","split","msg","width","marginTop","backgroundColor","display","flexDirection","flexWrap","alignContent","alignItems","justifyContent","fontSize","alignSelf","styles","StyleSheet","create"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport { View, Text, StyleSheet, Button, ScrollView } from 'react-native';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { GiftedChat, MessageText } from 'react-native-gifted-chat';\nimport {\n    renderAvatar,\n    renderBubble,\n    renderSystemMessage,\n    renderMessage,\n    renderMessageText,\n    renderCustomView,\n  } from './SystemMessage';\nimport SystemMessage from './SystemMessage'\nimport { Dialogflow_V2 } from 'react-native-dialogflow';\n\nimport { dialogflowConfig } from '../env';  \nconst BOT_USER = {  \n  _id: 2,\n  name: 'FAQ Bot',\n  avatar: 'https://gm1.ggpht.com/XmdWgDgmAnUERhzVhxFHRVIsJyX4Tcv-_C1BMpXZ74LZ1c1uGH3cBZA3gHBI0Lg0xRK9EwbpB_SrQlqW3ONfCfZc24xqKCCHQ5rfjkVcfQM3VJa-Ml9EpnYu7a6wLJg1bmBkUkKDgm0qo9qfKMAwpYz1QB1lsaiLWjUOHQfHYLI3TLCy7UoFIVQCFpC2r4eqIIt8aMID2RjmgieykD98-UQOzajG5EXgZoW11iNNljZ2U1nZJCbBWKTznrwARWLKsQDpaGq_lCV6P4R3rJQro8m25SathY9arn8FRAf-AeqHc4BjOk6KT3vjhTa22F-n6oCz0HRCpeI8WaRESNphbLT8j6b3vGGcpKrBSiJpwC46CJMEYoNhqu6hqd6nUVxcEVz8Rey_pW5DrnqGJ_eTj1YGkIkcJBRp7M7kI21L7jut30aumK7oHWeaY0lw-nvC6tLfEwqt1FCji6X9tJjyjbRfHGVd_OAySRhokAjSyA22tmLhnms0PRYLk5PDXzickWmFUbGWuaQug1Bs2uHVWYmVbelfytuDz3IGZudeYXqWKuZ4NMIW4PqDgwceTuVIxgNO5Ddo4leK1yA8ZQf0PkjS8ipQrjrTDD7O8tL2gQMOVlsFRuH1La8NFXHE-CSgpHU--9UYzzmpeGKtfrP5jeFmLZeKx2X2vsDqIMvNdjZb47nYsULYJenQyZcZYph88CFBP8cHB3lOqTuwu3aYOfa52M92dTY887c0wMHC=s0-l75-ft-l75-ft'\n};\n\n\nconst Dialogue = (props) => {\n    const [messages, setMessages] = useState([]);\n    const [trigger, setTrigger] = useState(\"Feeling Depleted\")\n    const [madlib, setMadLib] = useState(\"Dragon\")\n    const [triggers, setTriggers] = useState({\"Feeling Depleted\": \"Why are you feeling depleted? What happened?\", \"My Goals\": \"Why are you concerned about yout goals? What happened?\", \"Feeling Ambiguity\": \"In what way are you feeling that there is ambiguity? What happened?\", \"My Fears\": \"Why do you feel fearful? What happened?\"})\n    const [msgCount, setMsgCount] = useState(2)\n    const [presetMsgs, setPresetMsgs] = useState([\"ask for feeling\", \"they say what happened\", \"ask why for normal answer\", \"respond normally\", \"asky why with madlib\", \"pick which word for madlib\", \"tell user which madlib picked\", \"respond with madlib\", \"ask if they want to do more or save\"])\n    const [funWhy, setFunWhy] = \"Okay, let’s have fun with this! Choose a word from this list and use it to come up with a new reason for why this situation happened. The crazier the better!\"\n \n    useEffect(() => {\n        setMessages([\n        {\n            _id: 1,\n            text: 'Hi, Sam. What is your concern right now?',\n            user: BOT_USER,\n            quickReplies: {\n              type: \"radio\",\n              keepit: true,\n              values: [\n                {\"title\": \"Feeling Depleted\", \"value\": \"Feeling Depleted\"},\n                {\"title\": \"My Goals\", \"value\": \"My Goals\"},\n                {\"title\": \"Feeling Ambiguity\", \"value\": \"Feeling Ambiguity\"},\n                {\"title\": \"My Fears\", \"value\": \"My Fears\"}\n              ]\n            }\n        },\n        ])\n        Dialogflow_V2.setConfiguration(\n            dialogflowConfig.client_email,\n            dialogflowConfig.private_key,\n            Dialogflow_V2.LANG_ENGLISH_US,\n            dialogflowConfig.project_id\n          );\n    }, [])\n\n    // function getNextMessage(){\n    //     let textToBeSent = \"\"\n    //     if (msgCount == 2) textToBeSent = `${triggers[trigger]}`\n    //     if (msgCount == 4) textToBeSent = \"Why do you think this happened?\"\n    //     if (msgCount == 6) textToBeSent = \"Okay, let’s have fun with this! Choose a word from this list and use it to come up with a new reason for why this situation happened. The crazier the better!\"\n    //     if (msgCount == 8) textToBeSent = `Ok great! Think of a reason your situation by using “${madlib}” in your sentence.`\n    //     if (msgCount == 10) textToBeSent = `Great! Do you want to keep thinking of new reasons or save this story?`\n    //     let nextMsg = {\n    //         _id: Date.now(),\n    //         text: `${textToBeSent}`,\n    //         user: BOT_USER,\n    //     }\n    //     console.log(nextMsg.text)\n    //     return nextMsg\n    // }\n \n  const onSend = useCallback((messages = []) => {\n        let newMessage = messages\n        delete newMessage[0].createdAt\n        let newAndNext = [newMessage[0]]\n        setMessages(previousMessages => GiftedChat.append(previousMessages, newAndNext))\n        Dialogflow_V2.requestQuery(\n            messages[0].text,\n            result => handleGoogleResponse(result),\n            error => console.log(error)\n          );\n  }, [])\n\n  const onQuickReply = (quickReply) => {\n    let id = Date.now()\n    let message = [{\n      \"_id\": Date.now(),\n      \"text\": quickReply[0].value,\n      \"user\": {\"_id\": 1}\n    }]\n    console.log(quickReply[0].value)\n    if (quickReply[0].value == \"Save\") {\n      props.changeScreen({screen: \"Title\", story: messages});\n    }\n    else {\n    setMessages(previousMessages => GiftedChat.append(previousMessages, message))\n    message = quickReply[0].value\n    Dialogflow_V2.requestQuery(\n        message,\n        result => handleGoogleResponse(result),\n        error => console.log(error)\n      );\n    }\n}\n\n  const handleGoogleResponse = (result) => {  \n    let text = result.queryResult.fulfillmentMessages[0].text.text[0];\n    sendBotResponse(text);\n}\n\nconst sendBotResponse = (text) => {  \n  // if (text == funWhy) console.log(\"woooo\")\n  console.log(text.split(\" \")[0])\n    let msg = {\n      _id: Date.now(),\n      text,\n      createdAt: new Date(),\n      user: BOT_USER\n    };\n    if (text.split(\" \")[0] == \"Okay,\") {\n      msg = {\n        _id: Date.now(),\n        text,\n        createdAt: new Date(),\n        user: BOT_USER,\n        quickReplies: {\n          type: \"radio\",\n          keepit: true,\n          values: [\n            {\"title\": \"Corn\", \"value\": \"Corn\"},\n            {\"title\": \"Dragon\", \"value\": \"Dragon\"},\n            {\"title\": \"Shakira\", \"value\": \"Shakira\"}\n          ]\n        }\n      };\n    }\n    if (text.split(\" \")[0] == \"Great!\") {\n      msg = {\n        _id: Date.now(),\n        text,\n        createdAt: new Date(),\n        user: BOT_USER,\n        quickReplies: {\n          type: \"radio\",\n          keepit: true,\n          values: [\n            {\"title\": \"Save\", \"value\": \"Save\"},\n            {\"title\": \"Keep Going\", \"value\": \"Keep Going\"}\n          ]\n        }\n      };\n    }\n    if (text.split(\" \")[0] == \"Nice!\") {\n      msg = {\n        _id: Date.now(),\n        text,\n        createdAt: new Date(),\n        user: BOT_USER,\n        quickReplies: {\n          type: \"radio\",\n          keepit: true,\n          values: [\n            {\"title\": \"Black Friday\", \"value\": \"Black Friday\"},\n            {\"title\": \"Toe Nails\", \"value\": \"Toe Nails\"},\n            {\"title\": \"Kool-Aid Man\", \"value\": \"Kool-Aid Man\"}\n          ]\n        }\n      };\n    }\n    if (text == \"Save\") () => props.changeScreen({screen: \"Story\"})\n    setMessages(previousMessages => GiftedChat.append(previousMessages, msg))\n  }\n \n   return (\n    <View>\n        <TouchableOpacity style={{ width: 300, marginTop: 50, backgroundColor: \"white\", display: \"flex\", flexDirection: \"column\", flexWrap: \"wrap\", alignContent: \"flex-start\", alignItems: \"flex-start\", justifyContent: \"flex-start\"}} onPress={() => props.changeScreen({screen: \"Home\", story: \"\"})}>\n            <Text style={{fontSize: 40, display: \"flex\", flexDirection: \"column\", flexWrap: \"wrap\", alignSelf: \"flex-start\", alignContent: \"flex-start\", justifyContent: \"flex-start\"}}>&#8701;</Text>\n        </TouchableOpacity>\n        <GiftedChat\n            messages={messages}\n            onSend={messages => onSend(messages)}\n            onQuickReply={quickReply => onQuickReply(quickReply)}\n            user={{ _id: 1}}\n            // renderInputToolbar={InputToolbar}\n            renderAvatar={renderAvatar}\n            renderBubble={renderBubble}\n            renderSystemMessage={renderSystemMessage}\n            renderMessage={renderMessage}\n            renderMessageText={renderMessageText}\n            // renderMessageImage\n            renderCustomView={renderCustomView}\n        />\n    </View>\n   );\n}\nexport default Dialogue;\n\nconst styles = StyleSheet.create({\n   });"]},"metadata":{},"sourceType":"module"}